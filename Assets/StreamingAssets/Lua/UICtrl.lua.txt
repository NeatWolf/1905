UICtrl = {}

UICtrl.blackMask = nil

-- 镜头黑遮罩动画,目标透明度、时间、[委托]
function UICtrl:BlackMaskAni(alpha, time, event)
    if self.blackMask == nil then
        self.blackMask = CS.UnityEngine.GameObject.Find("UI/CameraMask/Panel"):GetComponent("Image")
    end
    if event then
        CS.DG.Tweening.DOTweenModuleUI.DOFade(self.blackMask, alpha, time).onComplete = event
    else
        CS.DG.Tweening.DOTweenModuleUI.DOFade(self.blackMask, alpha, time)
    end
end

-- 淡入淡出过场
-- time：float：总时间
-- event：委托
function UICtrl:CutTo(time, event)
    UICtrl:BlackMaskAni(
        1,
        time * 0.5,
        function()
            event()
            UICtrl:BlackMaskAni(0, time * 0.5)
        end
    )
end

--[[
    @desc: 弹窗管理
    author:{author}
    time:2019-08-11 16:40:23
    @return:
]]
function UICtrl:Pop()
end

--[[
    @desc: 退出弹窗
    author:{author}
    time:2019-08-11 21:19:15
    @return:
]]
function UICtrl:Back()
end

--[[
    @desc: 返回主场景
    author:{author}
    time:2019-08-11 21:19:58
    @return:
]]
function UICtrl:Back2MainScene()
    UICtrl:CutTo(
        0.5,
        function()
            -- 销毁除MainSceneUI以外的组件
            if LoadManager.findedParents["UI"] == nil then
                LoadManager.findedParents["UI"] = CS.UnityEngine.GameObject.Find("UI")
            end
            for i = 0, LoadManager.findedParents["UI"].transform.childCount - 1 do
                local go = LoadManager.findedParents["UI"].transform:GetChild(i)
                if go.name ~= "MainSceneUI" and go.name ~= "CameraMask" then
                    CS.UnityEngine.Object.Destroy(go.gameObject)
                end
            end
            -- 激活主场景
            MainSceneCtrl:Init()
        end
    )
end
