LotteryCtrl = {}
-- 预制体上的UISubObject脚本，内含所有UI对象
LotteryCtrl.Panel = nil

function LotteryCtrl:Init()
    print("进入抽奖")
    LoadManager:LoadLua("Lottery", "LotteryModel")

    -- 刷新数据，显示能否抽卡

    -- 注册委托

    -- 无事抽一发------------------------
    --[[

        for i = 1, 1000 do
            self:Get("Normal")
        end
        ]]
end

function LotteryCtrl:Exit()
    -- 销毁go
    -- 调用主界面Init
    -- 释放本系统下所有脚本
end

-- 抽卡。type（string）：卡池(Normal\Plus)
function LotteryCtrl:Get(type)
    -- 显示抽卡UI效果

    -- 扣除资源
    LotteryModel:DeductAsset(type)

    -- 计算概率，抽卡

    if CS.UnityEngine.Random.value < LotteryModel[type].roleProbability then
        -- 抽到角色
        local roleData = StaticDataModel:RandomTable(StaticDataModel.HerosTable)
        if StaticDataModel:Exist(PlayerDataModel.PlayerData.Heros, "HeroID", roleData.HeroID) then
            -- 转换成卷轴，显示转换成卷轴文字
            -- 角色添加到账号数据
        else
            -- 显示转换成卷轴文字
            -- 卷轴添加账号数据
        end
    else
        -- 抽到道具，显示获得物品
        -- 道具添加到账号数据
    end

    -- 保存账号数据，重新合并数据，刷新资源显示
end
