PlayerDataModel = {}

PlayerDataModel.FilePath = CS.UnityEngine.Application.persistentDataPath .. '/AccountData.json'
--print(CS.UnityEngine.Application.persistentDataPath)

-- 玩家的动态数据信息表
PlayerDataModel.PlayerData = {}
-- 玩家的动态数据信息表（合并后 完整的）
PlayerDataModel.CompletePlayerData = {}


-- 动态数据初始化
function PlayerDataModel:Init()
    
    -- 读取 玩家初始数据的策划静态表(json)
    local ta = ABManager:LoadAsset('json', 'PlayerInit')
    -- 写入
    self:WriteIn(ta.text)

end


-- 读取 可读写路径中的数据
function PlayerDataModel:ReadOut()

    if not CS.System.IO.File.Exists(PlayerDataModel.FilePath) then
        PlayerDataModel:Init()
    end

    -- 从可读写路径中读取信息
    local str = CS.System.IO.File.ReadAllText(self.FilePath)
    self.PlayerData = JsonUtil.decode(str)

    -- 合并出完整信息
    self.CompletePlayerData = StaticDataModel:MergeData(self.PlayerData)

    return self.CompletePlayerData
end


-- 写入 可读写路径
function PlayerDataModel:WriteIn(data)
    self.PlayerData = data
    CS.System.IO.File.WriteAllText(self.FilePath , self.PlayerData)
end